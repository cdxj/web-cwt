(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/f-login/components/f-login/f-login"],{274:function(e,n,o){"use strict";o.r(n);var t=o(275),i=o(277);for(var r in i)"default"!==r&&function(e){o.d(n,e,(function(){return i[e]}))}(r);o(279);var s,a=o(13),c=Object(a["default"])(i["default"],t["render"],t["staticRenderFns"],!1,null,"05a89aa4",null,!1,t["components"],s);c.options.__file="uni_modules/f-login/components/f-login/f-login.vue",n["default"]=c.exports},275:function(e,n,o){"use strict";o.r(n);var t=o(276);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},276:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return i})),o.d(n,"staticRenderFns",(function(){return s})),o.d(n,"recyclableRender",(function(){return r})),o.d(n,"components",(function(){return t}));try{t={uPopup:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(o.bind(null,327))},uLoadmore:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-loadmore/u-loadmore")]).then(o.bind(null,335))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.isPhoneLogin=!e.isPhoneLogin})},r=!1,s=[];i._withStripped=!0},277:function(e,n,o){"use strict";o.r(n);var t=o(278),i=o.n(t);for(var r in t)"default"!==r&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},278:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t,i=o(21),r=o(182);function s(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach((function(n){c(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function c(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}var u={computed:a({},(0,i.mapState)(["loginPopupShow"])),data:function(){return{PrimaryColor:"#1fba1a",isLoading:!1,isPhoneLogin:!0,readonly:!1,codeText:"获取验证码",phone:"",vCode:"",code:""}},watch:{loginPopupShow:function(e){e&&this.getLoginByUnion()}},methods:a(a({},(0,i.mapMutations)(["setLoginPopupShow"])),{},{onAuthorization:function(n){var o=this;(0,r.getUserInfo)((function(n){console.log(n,"授权信息");c({code:o.code,nickName:n.nickName||""},"nickName",n.avatarUrl||"");setTimeout((function(){e.showToast({title:"登录成功",icon:"none"}),o.closeLogin()}),100)}),(function(e){}))},decryptPhoneNumber:function(n){var o=this;console.log(n,"授权手机号");if("getPhoneNumber:ok"==n.detail.errMsg)if(n.detail.iv){var t=n.detail;t.code=this.code,this.closeLogin(),(0,r.getPhoneInfo)(t,"authorized",(function(n){setTimeout((function(){e.showToast({title:"登录成功",icon:"none"}),o.closeLogin()}),100)}))}else this.isPhoneLogin=!0,e.showToast({title:"请使用手机号登录",icon:"none"})},onAuthError:function(n){e.showToast({title:"您已拒绝授权~",icon:"none"})},closeLogin:function(){console.log("closeLogin"),this.setLoginPopupShow(!1),this.isLoading=!0,this.isPhoneLogin=!1},getLoginByUnion:function(){console.log("自动静默登录--自定义接口--");var n=this;e.login({success:function(e){console.log(e,"获取code"),n.code=e.code;e.code;setTimeout((function(){n.isLoading=!1}),500)}})},getCodeState:function(){var e=this;this.readonly=!0,this.codeText="60S后重新获取";var n=60;t=setInterval((function(){n--,e.codeText=n+"S后重新获取",n<=0&&(clearInterval(t),e.codeText="获取验证码",e.readonly=!1)}),1e3)},getVcode:function(){var n=this;if(this.readonly)e.showToast({title:"验证码已发送~",icon:"none"});else if(""!=this.phone){var o=/^1\d{10}$/;if(o.test(this.phone)){var t={type:"Login",phone:this.phone};e.$u.http.post("http://129.28.157.199:8888/api/user/get_sms",t).then((function(e){console.log(e.data),n.getCodeState()}))}else e.showToast({title:"手机号格式不正确~",icon:"none"})}else e.showToast({title:"请输入手机号~",icon:"none"})},onSubmit:function(){var n=this;if(""!=this.phone){var o=/^1\d{10}$/;if(o.test(this.phone))if(""!=this.vCode){var t={phone:this.phone,sms_code:this.vCode};e.$u.http.post("http://129.28.157.199:8888/api/user/login_sms",t).then((function(o){e.showToast({title:"登录成功~",icon:"none"}),n.setLoginPopupShow(!1);var t={session:o.data.SESSION,name:o.data.data.name,userId:o.data.data.user_id,identPart:o.data.data.ident_part,isManager:o.data.data.is_manager,managerPart:o.data.data.manager_part,phone:o.data.data.phone};console.log(t),n.$store.commit("setUserInfo",t)}))}else e.showToast({title:"请输入验证码~",icon:"none"});else e.showToast({title:"手机号格式不正确~",icon:"none"})}else e.showToast({title:"请输入手机号~",icon:"none"})}})};n.default=u}).call(this,o(1)["default"])},279:function(e,n,o){"use strict";o.r(n);var t=o(280),i=o.n(t);for(var r in t)"default"!==r&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},280:function(e,n,o){}}]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/f-login/components/f-login/f-login.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/f-login/components/f-login/f-login-create-component',
    {
        'uni_modules/f-login/components/f-login/f-login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(274))
        })
    },
    [['uni_modules/f-login/components/f-login/f-login-create-component']]
]);
