(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/f-login/components/f-login/f-login"],{"213a":function(o,e,t){"use strict";t.r(e);var n=t("801c"),i=t.n(n);for(var a in n)"default"!==a&&function(o){t.d(e,o,(function(){return n[o]}))}(a);e["default"]=i.a},"37af":function(o,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return n}));var n={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(t.bind(null,"eb14"))},uLoadmore:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-loadmore/u-loadmore")]).then(t.bind(null,"6392"))}},i=function(){var o=this,e=o.$createElement;o._self._c;o._isMounted||(o.e0=function(e){o.isPhoneLogin=!o.isPhoneLogin})},a=[]},"801c":function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=t("26cb"),a=t("4a96");function s(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.push.apply(t,n)}return t}function r(o){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){c(o,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(t,e))}))}return o}function c(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var u={computed:r({},(0,i.mapState)(["loginPopupShow"])),data:function(){return{PrimaryColor:"#1fba1a",isLoading:!0,isPhoneLogin:!1,readonly:!1,codeText:"获取验证码",phone:"",vCode:"",code:""}},watch:{loginPopupShow:function(o){o&&this.getLoginByUnion()}},methods:r(r({},(0,i.mapMutations)(["setLoginPopupShow"])),{},{onAuthorization:function(e){var t=this;(0,a.getUserInfo)((function(e){console.log(e,"授权信息");c({code:t.code,nickName:e.nickName||""},"nickName",e.avatarUrl||"");setTimeout((function(){o.showToast({title:"登录成功",icon:"none"}),t.closeLogin()}),100)}),(function(o){}))},decryptPhoneNumber:function(e){var t=this;console.log(e,"授权手机号");if("getPhoneNumber:ok"==e.detail.errMsg)if(e.detail.iv){var n=e.detail;n.code=this.code,this.closeLogin(),(0,a.getPhoneInfo)(n,"authorized",(function(e){setTimeout((function(){o.showToast({title:"登录成功",icon:"none"}),t.closeLogin()}),100)}))}else this.isPhoneLogin=!0,o.showToast({title:"请使用手机号登录",icon:"none"})},onAuthError:function(e){o.showToast({title:"您已拒绝授权~",icon:"none"})},closeLogin:function(){console.log("closeLogin"),this.setLoginPopupShow(!1),this.isLoading=!0,this.isPhoneLogin=!1},getLoginByUnion:function(){console.log("自动静默登录--自定义接口--");var e=this;o.login({success:function(o){console.log(o,"获取code"),e.code=o.code;o.code;setTimeout((function(){e.isLoading=!1}),500)}})},getCodeState:function(){var o=this;this.readonly=!0,this.codeText="60S后重新获取";var e=60;n=setInterval((function(){e--,o.codeText=e+"S后重新获取",e<=0&&(clearInterval(n),o.codeText="获取验证码",o.readonly=!1)}),1e3)},getVcode:function(){var e=this;if(this.readonly)o.showToast({title:"验证码已发送~",icon:"none"});else if(""!=this.phone){var t=/^1\d{10}$/;if(t.test(this.phone)){var n={type:"Login",phone:this.phone};o.$u.http.post("http://129.28.157.199:8001/api/user/get_sms",n).then((function(o){console.log(o.data),e.getCodeState()}))}else o.showToast({title:"手机号格式不正确~",icon:"none"})}else o.showToast({title:"请输入手机号~",icon:"none"})},onSubmit:function(){var e=this;if(""!=this.phone){var t=/^1\d{10}$/;if(t.test(this.phone))if(""!=this.vCode){var n={phone:this.phone,sms_code:this.vCode};o.$u.http.post("http://129.28.157.199:8001/api/user/login_sms",n).then((function(t){o.showToast({title:"登录成功~",icon:"none"}),e.setLoginPopupShow(!1);var n={session:t.data.SESSION,name:t.data.data.name,userId:t.data.data.user_id,identPart:t.data.data.ident_part,isManager:t.data.data.is_manager,managerPart:t.data.data.manager_part,phone:t.data.data.phone};console.log(n),e.$store.commit("setUserInfo",n)}))}else o.showToast({title:"请输入验证码~",icon:"none"});else o.showToast({title:"手机号格式不正确~",icon:"none"})}else o.showToast({title:"请输入手机号~",icon:"none"})}})};e.default=u}).call(this,t("543d")["default"])},"9c01":function(o,e,t){"use strict";var n=t("e30b"),i=t.n(n);i.a},a425:function(o,e,t){"use strict";t.r(e);var n=t("37af"),i=t("213a");for(var a in i)"default"!==a&&function(o){t.d(e,o,(function(){return i[o]}))}(a);t("9c01");var s,r=t("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"62c4a658",null,!1,n["a"],s);e["default"]=c.exports},e30b:function(o,e,t){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/f-login/components/f-login/f-login-create-component',
    {
        'uni_modules/f-login/components/f-login/f-login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("a425"))
        })
    },
    [['uni_modules/f-login/components/f-login/f-login-create-component']]
]);
